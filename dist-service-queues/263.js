"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[263],{4819:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(272),o=n.n(r),i=n(2609),a=n.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-service-queues__queue-entry-actons-modal__radioButtonGroup___VC7fE{display:flex;flex-direction:column;align-items:flex-start;margin-top:.5rem;min-height:4rem;width:100%;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-service-queues__queue-entry-actons-modal__radioButton___KY_tG{padding:.25rem .25rem;margin:.5rem 0}section{margin:.5rem}.-esm-service-queues__queue-entry-actons-modal__sectionTitle___jB8wo{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.75rem}.-esm-service-queues__queue-entry-actons-modal__queueEntryActionModalBody___f5dUG{padding-bottom:1rem}.cds--modal-container:has(.-esm-service-queues__queue-entry-actons-modal__queueEntryActionModalBody___f5dUG){overflow:auto}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/queue-table/queue-entry-actions/queue-entry-actons-modal.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,yEACE,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,gBCaW,CDZX,eC+CW,CD9CX,UAAA,CEw1BE,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFp1BJ,oEACE,qBAAA,CACA,cAAA,CAGF,QACE,YCCW,CDEb,qEE20BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFz0BF,aDpBQ,CCqBR,oBAAA,CAGF,kFACE,mBCCW,CDMb,6GACE,aAAA",sourceRoot:""}]),a.locals={radioButtonGroup:"-esm-service-queues__queue-entry-actons-modal__radioButtonGroup___VC7fE",radioButton:"-esm-service-queues__queue-entry-actons-modal__radioButton___KY_tG",sectionTitle:"-esm-service-queues__queue-entry-actons-modal__sectionTitle___jB8wo",queueEntryActionModalBody:"-esm-service-queues__queue-entry-actons-modal__queueEntryActionModalBody___f5dUG"};const u=a},6124:(e,t,n)=>{n.d(t,{Z:()=>O});var r=n(9383),o=n(2870),i=n(5206),a=n.n(i),u=n(4924),s=n(9561),l=n(2312),c=n(1354),d=n.n(c),m=n(1583),p=n.n(m),A=n(7378),y=n.n(A),f=n(5993),v=n.n(f),_=n(4154),g=n.n(_),b=n(8141),C=n.n(b),h=n(4819),E={};E.styleTagTransform=C(),E.setAttributes=v(),E.insert=y().bind(null,"head"),E.domAPI=p(),E.insertStyleElement=g(),d()(h.Z,E);const q=h.Z&&h.Z.locals?h.Z.locals:void 0;function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function P(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const O=function(e){var t,n=e.queueEntry,c=e.closeModal,d=e.modalParams,m=(0,u.useTranslation)().t,p=(0,s.Q)().mutateQueueEntries,A=d.modalTitle,y=d.modalInstruction,f=d.submitButtonText,v=d.submitSuccessTitle,_=d.submitSuccessText,g=d.submitFailureTitle,b=d.submitAction,C=d.disableSubmit,h=T((0,i.useState)({selectedQueue:n.queue.uuid,selectedPriority:n.priority.uuid,selectedStatus:n.status.uuid,prioritycomment:null!==(t=n.priorityComment)&&void 0!==t?t:""}),2),E=h[0],w=h[1],S=(0,l.y)().queues,O=T((0,i.useState)(!1),2),k=O[0],j=O[1],D=S.find((function(e){return e.uuid==E.selectedQueue})),x=null==D?void 0:D.allowedStatuses,F=D&&0==x.length,Q=null==D?void 0:D.allowedPriorities,G=D&&0==Q.length,N=Q.findIndex((function(e){return e.uuid==E.selectedPriority}));return a().createElement(a().Fragment,null,a().createElement(r.xBx,{closeModal:c,title:A}),a().createElement(r.fef,null,a().createElement("div",{className:q.queueEntryActionModalBody},a().createElement(r.Kqy,{gap:4},a().createElement("h5",null,n.display),a().createElement("p",null,y),a().createElement("section",{className:q.section},a().createElement("div",{className:q.sectionTitle},m("serviceQueue","Service queue")),a().createElement(r.PhF,{labelText:m("selectQueue","Select a queue"),id:"queue",invalidText:"Required",value:E.selectedQueue,onChange:function(e){return function(e){var t,n,r=S.find((function(t){return t.uuid==e})),o=r.allowedStatuses,i=r.allowedPriorities,a=o.find((function(e){return e.uuid==E.selectedStatus})),u=i.find((function(e){return e.uuid==E.selectedPriority}));w({selectedQueue:e,selectedStatus:a?E.selectedStatus:null===(t=o[0])||void 0===t?void 0:t.uuid,selectedPriority:u?E.selectedPriority:null===(n=i[0])||void 0===n?void 0:n.uuid,prioritycomment:E.prioritycomment})}(e.target.value)}},null==S?void 0:S.map((function(e){var t=e.uuid,o=e.display;return a().createElement(r.QlF,{key:t,text:t==n.queue.uuid?m("currentValueFormatted","{{value}} (Current)",{value:o,interpolation:{escapeValue:!1}}):o,value:t})})))),a().createElement("section",null,a().createElement("div",{className:q.sectionTitle},m("queueStatus","Queue status")),F?a().createElement(r.K0D,{kind:"error",lowContrast:!0,subtitle:m("configureStatus","Please configure status to continue."),title:m("noStatusConfigured","No status configured")}):a().createElement(r.SYO,{name:"status",valueSelected:E.selectedStatus,onChange:function(e){var t;t=e,w(P(B({},E),{selectedStatus:t}))}},null==x?void 0:x.map((function(e){var t=e.uuid,o=e.display;return a().createElement(r.EUY,{key:t,name:o,labelText:t==n.status.uuid?m("currentValueFormatted","{{value}} (Current)",{value:o,interpolation:{escapeValue:!1}}):o,value:t})})))),a().createElement("section",{className:q.section},a().createElement("div",{className:q.sectionTitle},m("queuePriority","Queue priority")),G?a().createElement(r.K0D,{className:q.inlineNotification,kind:"error",lowContrast:!0,subtitle:m("configurePriorities","Please configure priorities to continue."),title:m("noPrioritiesConfigured","No priorities configured")}):a().createElement(r.GHR,{size:"sm",selectedIndex:N,onChange:function(e){var t;t=e.name,w(P(B({},E),{selectedPriority:t}))}},null==Q?void 0:Q.map((function(e){var t=e.uuid,o=e.display;return a().createElement(r.rsf,{role:"radio",name:t,text:t==n.priority.uuid?m("currentValueFormatted","{{value}} (Current)",{value:o,interpolation:{escapeValue:!1}}):o,key:t,value:t})})))),a().createElement("section",{className:q.section},a().createElement("div",{className:q.sectionTitle},m("priorityComment","Priority comment")),a().createElement(r.Kx8,{labelText:"",value:E.prioritycomment,onChange:function(e){return t=e.target.value,void w(P(B({},E),{prioritycomment:t}));var t},placeholder:m("enterCommentHere","Enter comment here")}))))),a().createElement(r.mzw,null,a().createElement(r.zxk,{kind:"secondary",onClick:c},m("cancel","Cancel")),a().createElement(r.zxk,{disabled:k||C(n,E),onClick:function(e){e.preventDefault(),j(!0),b(n,E).then((function(e){if(200!==e.status)throw{message:m("unexpectedServerResponse","Unexpected Server Response")};(0,o.showSnackbar)({isLowContrast:!0,title:v,kind:"success",subtitle:_}),p(),c()})).catch((function(e){(0,o.showSnackbar)({title:g,kind:"error",subtitle:null==e?void 0:e.message})})).finally((function(){j(!1)}))}},f)))}},7702:(e,t,n)=>{n.d(t,{VK:()=>a,hu:()=>u,rf:()=>o,zI:()=>i});var r=n(2870);function o(e,t){return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/queue-entry/transition"),{method:"POST",headers:{"Content-Type":"application/json"},signal:null==t?void 0:t.signal,body:e})}function i(e,t,n){return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/queue-entry/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},signal:null==n?void 0:n.signal,body:t})}function a(e,t){return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/queue-entry/transition"),{method:"DELETE",headers:{"Content-Type":"application/json"},signal:null==t?void 0:t.signal,body:e})}function u(e,t){return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/queue-entry/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"},signal:null==t?void 0:t.signal})}}}]);