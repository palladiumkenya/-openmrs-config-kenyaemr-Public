"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[616],{3223:(e,o,t)=>{t.d(o,{Z:()=>u});var r=t(272),n=t.n(r),i=t(2609),a=t.n(i)()(n());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-service-queues__add-provider-queue-room__section___WHhMV{margin:.5rem}.-esm-service-queues__add-provider-queue-room__sectionTitle___ArcWQ{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.75rem}.-esm-service-queues__add-provider-queue-room__checkbox___VEBx1{padding-top:.75rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/add-provider-queue-room/add-provider-queue-room.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,+DACE,YCgBW,CDbb,oEE01BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFx1BF,aDLQ,CCMR,oBCeW,CDZb,gEACE,kBCWW",sourceRoot:""}]),a.locals={section:"-esm-service-queues__add-provider-queue-room__section___WHhMV",sectionTitle:"-esm-service-queues__add-provider-queue-room__sectionTitle___ArcWQ",checkbox:"-esm-service-queues__add-provider-queue-room__checkbox___VEBx1"};const u=a},6616:(e,o,t)=>{t.r(o),t.d(o,{default:()=>T});var r=t(5206),n=t.n(r),i=t(4924),a=t(9383),u=t(2870),s=t(1995),c=t(3546),l=t(3670),d=t(1354),m=t.n(d),v=t(1583),_=t.n(v),p=t(7378),g=t.n(p),q=t(5993),A=t.n(q),b=t(4154),f=t.n(b),h=t(8141),C=t.n(h),S=t(3223),E={};E.styleTagTransform=C(),E.setAttributes=A(),E.insert=g().bind(null,"head"),E.domAPI=_(),E.insertStyleElement=f(),m()(S.Z,E);const L=S.Z&&S.Z.locals?S.Z.locals:void 0;var k=t(1398),y=t(3955),w=t(195),x=t(8883),Q=w.z.object({queueLocation:w.z.object({id:w.z.string(),name:w.z.string()},{required_error:"Queue location is required"}),service:w.z.object({uuid:w.z.string(),display:w.z.string()},{required_error:"Service is required"}),room:w.z.object({uuid:w.z.string(),display:w.z.string()},{required_error:"Room is required"}),retainLocation:w.z.boolean()});const T=function(e){var o,t=e.providerUuid,r=e.closeModal,d=(0,i.useTranslation)().t,m=(0,y.cI)({resolver:(0,x.F)(Q),defaultValues:{queueLocation:{},service:{},room:{},retainLocation:!1}}),v=m.control,_=m.handleSubmit,p=m.formState.errors,g=(0,c.ej)(t).mutate,q=(0,l.Hp)(),A=(0,c.ej)(t),b=A.providerRoom,f=(A.isLoading,null===(o=(0,y.qo)({control:v,name:"queueLocation"}))||void 0===o?void 0:o.id),h=(0,k.y)(f).queues,C=(0,c.dF)(f).rooms,S=(0,s.J)().queueLocations;return n().createElement("div",null,n().createElement(a.l09,{onSubmit:_((function(e){var o,n=e.service,i=e.queueLocation,a=e.retainLocation,s=e.room;!function(e){localStorage.setItem("queueServiceName",e.display),localStorage.setItem("queueServiceUuid",e.uuid),(0,l.yk)(e.name),(0,l.u_)(e.uuid)}(n),function(e){localStorage.setItem("queueLocationUuid",e.id),localStorage.setItem("queueLocationName",e.name),(0,l.yl)(e.name),(0,l._j)(e.id)}(i),o=a,localStorage.setItem("isPermanentProviderQueueRoom",JSON.parse(o)),(0,l.wE)(JSON.parse(o)),(null==b?void 0:b.length)>0?(0,c.av)(null==b?void 0:b[0].uuid,null==s?void 0:s.uuid,t).then((function(e){200===e.status&&((0,u.showSnackbar)({isLowContrast:!0,title:d("updateRoom","Update room"),kind:"success",subtitle:d("queueRoomUpdatedSuccessfully","Queue room updated successfully")}),r(),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString()),(0,l.By)(new Date),g())}),(function(e){(0,u.showSnackbar)({title:d("queueRoomAddFailed","Error adding queue room"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message}),r()})):(0,c._5)(s.uuid,t).then((function(e){201===e.status&&((0,u.showSnackbar)({isLowContrast:!0,title:d("addRoom","Add room"),kind:"success",subtitle:d("queueRoomAddedSuccessfully","Queue room added successfully")}),r(),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString()),(0,l.By)(new Date),g())}),(function(e){(0,u.showSnackbar)({title:d("queueRoomAddFailed","Error adding queue room"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})}))}),(function(e){return console.error(e)}))},n().createElement(a.xBx,{closeModal:r,title:d("addProviderQueueRoom","Add provider queue room?")}),n().createElement(a.fef,null,n().createElement("section",{className:L.section},n().createElement(y.Qr,{control:v,name:"queueLocation",render:function(e){var o=e.field,t=o.onChange;return o.value,n().createElement(a.Ltx,{id:"queueLocation","aria-label":d("selectQueueLocation","Select a queue location"),label:d("selectQueueLocation","Select a queue location"),titleText:d("queueLocation","Queue location"),type:"default",items:S,itemToString:function(e){return e?e.name:""},onChange:function(e){var o=e.selectedItem;return t(o)},size:"md",invalid:!!p.queueLocation,invalidText:"Queue location is required"})}})),n().createElement("section",{className:L.section},n().createElement(y.Qr,{control:v,name:"service",render:function(e){var o=e.field,t=o.onChange;return o.value,n().createElement(a.Ltx,{id:"service","aria-label":d("selectService","Select a service"),type:"default",label:d("selectService","Select a service"),titleText:d("queueService","Queue service"),items:h,itemToString:function(e){return e?e.display:""},onChange:function(e){var o=e.selectedItem;return t(null==o?void 0:o.service)},size:"md",invalid:!!p.service,invalidText:"Service is required"})}})),n().createElement("section",{className:L.section},n().createElement("div",{className:L.filterContainer},n().createElement(y.Qr,{control:v,name:"room",render:function(e){var o=e.field,t=o.onChange;return o.value,n().createElement(a.Ltx,{items:C,itemToString:function(e){return e?e.display:""},onChange:function(e){var o=e.selectedItem;return t(o)},label:"Select an option...",id:"room",titleText:d("queueRoom","Queue room"),invalid:!!p.room,invalidText:"Room is required"})}}))),n().createElement("section",{className:L.section},n().createElement(y.Qr,{control:v,name:"retainLocation",render:function(e){var o=e.field,t=o.onChange,r=o.value;return n().createElement(a.XZJ,{value:r,id:"retainLocation",labelText:d("retainLocation","Retain location"),onChange:t,checked:q})}}))),n().createElement(a.mzw,null,n().createElement(a.zxk,{kind:"secondary",onClick:r},d("cancel","Cancel")),n().createElement(a.zxk,{type:"submit"},d("save","Save")))))}}}]);