"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[404],{7224:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(272),n=a.n(r),i=a(2609),o=a.n(i)()(n());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-chart__deceased-form__container___HMknk{margin:1rem}.-esm-patient-chart__deceased-form__container___HMknk section{margin:1rem 0}.-esm-patient-chart__deceased-form__heading___QAA4P{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);color:#525252;margin:1rem}.-esm-patient-chart__deceased-form__sectionTitle___BfE0L{font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0);color:#525252;margin:0 0 .5rem 0}.-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapper___YOMx8{margin:1rem 0rem;border:.0625rem solid #e0e0e0;background-color:#f4f4f4}.-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapper___YOMx8 div:nth-child(3)>div:nth-child(2){position:relative}.-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapper___YOMx8 div:nth-child(3) span *{display:none}.-esm-patient-chart__deceased-form__radioButtonGroup___Q09he{display:flex;flex-direction:column;align-items:flex-start;margin-top:.5rem;min-height:4rem;width:100%;font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px);color:#525252;background-color:#f4f4f4}.-esm-patient-chart__deceased-form__radioButton___bZrrP{padding:.25rem 1rem;margin:.5rem 0}.-esm-patient-chart__deceased-form__contentSwitcher___oxDps{height:3rem}.-esm-patient-chart__deceased-form__headerGridRow___NgVrM{border-bottom:.0625rem solid #e0e0e0;margin:0}.-esm-patient-chart__deceased-form__dataGridRow___AM8Kq{display:grid;grid-template-columns:50% 10% 1fr;margin:.5rem 1rem}.-esm-patient-chart__deceased-form__form___GIplW{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}.-esm-patient-chart__deceased-form__button___QVKPA{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapperTablet___lWiUN{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapperDesktop___vojSA{padding:0rem}.-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapperDesktop___vojSA .-esm-patient-chart__deceased-form__paginationContainer___Q6_S5 div{background-color:#f4f4f4}.-esm-patient-chart__deceased-form__warningContainer___AQyRx{display:flex;background-color:#fff8e1;padding:1rem;align-items:center}.-esm-patient-chart__deceased-form__warningIcon___u4DOQ{display:flex;align-self:center;fill:#f1c21b;margin-right:.5rem}.-esm-patient-chart__deceased-form__warningText___mEPjj{font-size:.875rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/deceased/deceased-form.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,sDACE,WCyBW,CDvBX,8DACE,aAAA,CAIJ,oDEq1BI,6DAAA,CAAA,6DAAA,CAAA,6DAAA,CAAA,iEAAA,CFn1BF,aDVQ,CCWR,WCeW,CDZb,yDE+0BI,0DAAA,CAAA,6DAAA,CAAA,+DAAA,CAAA,iEAAA,CF70BF,aDhBQ,CCiBR,kBAAA,CAGF,yEACC,gBAAA,CACA,6BAAA,CACC,wBD5BM,CC+BR,2GACC,iBAAA,CAGD,iGACC,YAAA,CAGD,6DACC,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,gBCtBY,CDuBZ,eCYY,CDXZ,UAAA,CEqzBG,sDAAA,CAAA,qDAAA,CAAA,yDAAA,CAAA,8DAAA,CFnzBH,aD1CS,CC2CR,wBDhDM,CCmDR,wDACC,mBAAA,CACA,cAAA,CAGD,4DACE,WCNW,CDSb,0DACE,oCAAA,CACA,QAAA,CAGF,wDACE,YAAA,CACA,iCAAA,CACA,iBAAA,CAGF,iDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,yBAAA,CAGF,mDACE,WCvBW,CDwBX,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,+EACE,mBAAA,CACA,qBDvFM,CC0FR,gFACE,YAAA,CAEA,oJACA,wBD/FM,CCmGR,6DACE,YAAA,CACA,wBDnFmB,CCoFnB,YCvEW,CDwEX,kBAAA,CAEF,wDACE,YAAA,CACA,iBAAA,CACA,YD3FmB,CC4FnB,kBCxFW,CD2Fb,wDACE,iBAAA",sourceRoot:""}]),o.locals={container:"-esm-patient-chart__deceased-form__container___HMknk",heading:"-esm-patient-chart__deceased-form__heading___QAA4P",sectionTitle:"-esm-patient-chart__deceased-form__sectionTitle___BfE0L",conceptAnswerOverviewWrapper:"-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapper___YOMx8",radioButtonGroup:"-esm-patient-chart__deceased-form__radioButtonGroup___Q09he",radioButton:"-esm-patient-chart__deceased-form__radioButton___bZrrP",contentSwitcher:"-esm-patient-chart__deceased-form__contentSwitcher___oxDps",headerGridRow:"-esm-patient-chart__deceased-form__headerGridRow___NgVrM",dataGridRow:"-esm-patient-chart__deceased-form__dataGridRow___AM8Kq",form:"-esm-patient-chart__deceased-form__form___GIplW",button:"-esm-patient-chart__deceased-form__button___QVKPA",conceptAnswerOverviewWrapperTablet:"-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapperTablet___lWiUN",conceptAnswerOverviewWrapperDesktop:"-esm-patient-chart__deceased-form__conceptAnswerOverviewWrapperDesktop___vojSA",paginationContainer:"-esm-patient-chart__deceased-form__paginationContainer___Q6_S5",warningContainer:"-esm-patient-chart__deceased-form__warningContainer___AQyRx",warningIcon:"-esm-patient-chart__deceased-form__warningIcon___u4DOQ",warningText:"-esm-patient-chart__deceased-form__warningText___mEPjj"};const c=o},2404:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var r=a(268),n=a.n(r),i=a(3565),o=a.n(i),c=a(4924),s=a(4350),l=a(6615),d=a(2870),A=a(7089),_=a(2779),m=a.n(_),u=a(6520),p=a(7279),h=a(414),f=a(321),C=a.n(f),g=a(1195),v=a.n(g),w=a(3275),D=a.n(w),b=a(7162),y=a.n(b),E=a(2094),B=a.n(E),k=a(757),S=a.n(k),T=a(7224),W={};W.styleTagTransform=S(),W.setAttributes=y(),W.insert=D().bind(null,"head"),W.domAPI=v(),W.insertStyleElement=B(),C()(T.Z,W);const x=T.Z&&T.Z.locals?T.Z.locals:void 0;function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function F(e){var t=e.children;return e.isTablet?n().createElement(s.Layer,null,t," "):n().createElement(n().Fragment,null,t)}const G=function(e){var t,a,i=e.onChange,o=(e.isPatientDead,e.conceptAnswers),l=(0,c.useTranslation)().t,A="tablet"===(0,d.useLayoutType)(),_=(t=(0,r.useState)(""),a=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,i=[],o=!0,c=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(c)throw n}}return i}}(t,a)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?O(e,t):void 0}}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=_[0],C=_[1],g=(0,r.useMemo)((function(){return(0,p.Z)(f)?o:o.filter((function(e){return-1!==e.display.toLowerCase().search(f.toLowerCase())}))}),[f,o]),v=n().useMemo((function(){return(0,u.Z)((function(e){return C(e)}),300)}),[C]),w=(0,d.usePagination)(g,10),D=w.results,b=w.currentPage,y=w.goTo;return n().createElement("div",{className:m()(x.conceptAnswerOverviewWrapper,A?x.conceptAnswerOverviewWrapperTablet:x.conceptAnswerOverviewWrapperDesktop)},n().createElement(F,{isTablet:A},n().createElement(s.Search,{onChange:function(e){return v(e.target.value)},placeholder:l("searchForCauseOfDeath","Search for a cause of death"),labelText:""})),D.length?n().createElement(n().Fragment,null,n().createElement(s.RadioButtonGroup,{className:x.radioButtonGroup,defaultSelected:"default-selected",orientation:"vertical",onChange:i,name:"radio-button-group",valueSelected:"default-selected"},null==D?void 0:D.map((function(e){var t=e.uuid,a=e.display,r=e.name;return n().createElement(s.RadioButton,{key:t,className:x.radioButton,id:r,labelText:a,value:t})}))),n().createElement("div",{className:x.paginationContainer},n().createElement(h.PatientChartPagination,{pageNumber:b,totalItems:null==o?void 0:o.length,currentItems:D.length,pageSize:10,onPageNumberChange:function(e){var t=e.page;return y(t)}}))):n().createElement(h.EmptyState,{displayText:l("causeOfDeath_title","Cause of Death"),headerTitle:l("causeOfDeath","Cause of death")}))};function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,i=[],o=!0,c=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(c)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){var t=e.children;return e.isTablet?n().createElement(s.Layer,null,t," "):n().createElement(n().Fragment,null,t)}const P=function(e){var t=e.patientUuid,a=e.closeWorkspace,i=(0,c.useTranslation)().t,_="tablet"===(0,d.useLayoutType)(),m=(0,r.useMemo)((function(){return{patientUuid:t}}),[t]),u=N((0,r.useState)(""),2),p=u[0],h=u[1],f=(0,A.FA)().conceptAnswers,C=(0,A.mk)(t),g=C.deathDate,v=C.isDead,w=C.isLoading,D=N((0,r.useState)(v?new Date(o()(g).year(),o()(g).month(),o()(g).date()-1):new Date),2),b=D[0],y=D[1],E=function(e){e.preventDefault(),(0,A.ZY)(b,t,p,new AbortController).then((function(e){e.ok&&((0,d.showSnackbar)({isLowContrast:!0,kind:"success",title:i("confirmDeceased","Confirm Deceased"),subtitle:i("setDeceasedSuccessfully","Patient has been marked dead successfully")}),a())})).catch((function(e){(0,d.showSnackbar)({title:i("setDeceasedError","Error marking patient deceased"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})}))};return n().createElement(s.Form,{className:x.form},n().createElement("div",null,_&&n().createElement(s.Row,{className:x.headerGridRow},n().createElement(d.ExtensionSlot,{name:"visit-form-header-slot",className:x.dataGridRow,state:m})),n().createElement("div",{className:x.container},n().createElement("span",{className:x.warningContainer},n().createElement(l.Rr,{size:20,title:"WarningFilled","aria-label":"Warning",className:x.warningIcon}),n().createElement("span",{className:x.warningText},i("markingPatientDeceasedInfoText","Marking the patient as deceased will end any active visits for this patient"))),n().createElement("section",null,n().createElement("div",{className:x.sectionTitle},i("dateOfDeath","Date of Death")),f?n().createElement(I,{isTablet:_},n().createElement(s.DatePicker,{dateFormat:"d/m/Y",datePickerType:"single",id:"deceasedDate",style:{width:"100%",paddingBottom:"1rem"},maxDate:(new Date).toISOString(),onChange:function(e){var t=N(e,1)[0];return y(t)},value:b},n().createElement(s.DatePickerInput,{id:"deceasedDateInput",style:{width:"100%"},disabled:v,labelText:i("date","Date"),placeholder:"dd/mm/yyyy"}))):n().createElement(s.DatePickerSkeleton,null)),n().createElement("section",null,!v&&n().createElement("div",{className:x.sectionTitle},i("causeOfDeath","Cause of death")),f?n().createElement(G,{onChange:function(e){h(e)},conceptAnswers:f,isPatientDead:v}):n().createElement("div",null,n().createElement(s.DataTableSkeleton,{columnCount:1,showToolbar:!1,showHeader:!1,rowCount:10}))))),n().createElement(s.ButtonSet,{className:_?x.tablet:x.desktop},n().createElement(s.Button,{className:x.button,kind:"secondary",onClick:a},i("discard","Discard")),n().createElement(s.Button,{onClick:function(){var e=(0,d.showModal)("confirm-deceased-dialog",{closeDialog:function(){return e()},handleSubmit:E})},className:x.button,disabled:""===p||w,kind:"primary"},i("setDeceased","Set Deceased"))))}}}]);